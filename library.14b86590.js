function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in l)return l[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return l[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a),a("3ILHO"),a("bbmaV"),a("eC6VJ");var o=e(a("amrNH")).template({1:function(e,t,l,n,a){var o,i=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,s="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="gallery__item gallery__item-library" id="'+c(typeof(o=null!=(o=d(l,"id")||(null!=t?d(t,"id"):t))?o:r)===s?o.call(i,{name:"id",hash:{},data:a,loc:{start:{line:2,column:52},end:{line:2,column:58}}}):o)+'">\n    <div class="gallery__film-image">\n        <img src="https://image.tmdb.org/t/p/w500'+c(typeof(o=null!=(o=d(l,"poster_path")||(null!=t?d(t,"poster_path"):t))?o:r)===s?o.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:4,column:49},end:{line:4,column:64}}}):o)+'" loading="lazy" alt="'+c(typeof(o=null!=(o=d(l,"title")||(null!=t?d(t,"title"):t))?o:r)===s?o.call(i,{name:"title",hash:{},data:a,loc:{start:{line:4,column:86},end:{line:4,column:95}}}):o)+'"  class="gallery_image" />\n    </div>\n    <div class="gallery__film-info">\n        <p class="gallery__film-name">'+c(typeof(o=null!=(o=d(l,"title")||(null!=t?d(t,"title"):t))?o:r)===s?o.call(i,{name:"title",hash:{},data:a,loc:{start:{line:7,column:38},end:{line:7,column:47}}}):o)+'</p>\n        <p class="gallery__film-subscription">'+c(typeof(o=null!=(o=d(l,"genre_ids")||(null!=t?d(t,"genre_ids"):t))?o:r)===s?o.call(i,{name:"genre_ids",hash:{},data:a,loc:{start:{line:8,column:46},end:{line:8,column:59}}}):o)+" | "+c(typeof(o=null!=(o=d(l,"release_date")||(null!=t?d(t,"release_date"):t))?o:r)===s?o.call(i,{name:"release_date",hash:{},data:a,loc:{start:{line:8,column:62},end:{line:8,column:78}}}):o)+'\n        <span class="gallery_film-vote">'+c(typeof(o=null!=(o=d(l,"vote_average")||(null!=t?d(t,"vote_average"):t))?o:r)===s?o.call(i,{name:"vote_average",hash:{},data:a,loc:{start:{line:9,column:40},end:{line:9,column:56}}}):o)+"</span></p>\n    </div>\n    </div>\n</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,l,n,a){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(l,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:13,column:9}}}))?o:""},useData:!0}),i=a("70Nf4"),r=a("bbmaV"),s=(r=a("bbmaV"),a("gMdK3")),c=a("3ILHO");a("amrNH");const{cardsEl:d,modalFilm:u,closeModalBtn:m,backdrop:p,modalContainer:f,modalFilmContainer:_}=c.refs,g=document.querySelector(".header__watch-btn"),v=document.querySelector(".header__queue-btn");function y(){let e=JSON.parse(localStorage.getItem(r.FILMOTEKA_KEY_WATCHED));const t=s.movieDatabase.createCardsMarkup(e);d.innerHTML=o(t),g.classList.add("btn-active"),v.classList.remove("btn-active")}function h(e){(e.target.classList.contains("backdrop")||e.target.classList.contains("modal__close-btn"))&&b()}function b(){u.classList.add("visually-hidden"),p.removeEventListener("click",h),window.removeEventListener("keydown",E)}function E(e){"Escape"===e.code&&b()}(()=>{let e=JSON.parse(localStorage.getItem(r.FILMOTEKA_KEY_WATCHED))??{};s.movieDatabase.films=e,async function(e){try{await s.movieDatabase.fetchGenres()}catch(e){console.log(e)}y()}()})(),g.addEventListener("click",y),v.addEventListener("click",(function(){let e=JSON.parse(localStorage.getItem(r.FILMOTEKA_KEY_QUEUE));const t=s.movieDatabase.createCardsMarkup(e);d.innerHTML=o(t),g.classList.remove("btn-active"),v.classList.add("btn-active")})),d.addEventListener("click",(function(e){if(!e.target.closest(".gallery__item-library"))return;!function(e){u.classList.remove("visually-hidden"),p.addEventListener("click",h),window.addEventListener("keydown",E);const t=JSON.parse(localStorage.getItem(r.FILMOTEKA_KEY_WATCHED)),l=JSON.parse(localStorage.getItem(r.FILMOTEKA_KEY_QUEUE));t.some((l=>{l.id===Number(e)&&(f.innerHTML=(0,i.default)(l),t.modalFilm=l)})),l.some((t=>{t.id===Number(e)&&(f.innerHTML=(0,i.default)(t),l.modalFilm=t)}))}(e.target.closest(".gallery__item-library").id);const t=document.querySelector(".js-queue"),l=document.querySelector(".js-watched");t.classList.add("visually-hidden"),l.classList.add("visually-hidden");const n=document.querySelector(".film-vote");n.textContent=Number.parseFloat(n.textContent).toFixed(1);const a=document.querySelector(".film-popularity");a.textContent=Number.parseFloat(a.textContent).toFixed(1);const o=document.querySelector(".film-genre");if(s.movieDatabase.modalFilm.genre_ids.length){const e=s.movieDatabase.modalFilm.genre_ids.map((e=>s.movieDatabase.allGenres.find((t=>t.id===e)).name));o.textContent=e.join(", ")}else o.textContent="----"})),a("96upZ"),a("hUfoy");
//# sourceMappingURL=library.14b86590.js.map
