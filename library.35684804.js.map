{"mappings":"gfAAAA,EAAA,S,sBCAA,IAAAC,EAAAD,EAAA,S,iEAQA,MAAME,QACJC,EAAOC,UACPC,EAASC,cACTC,EAAaC,SACbC,EAAQC,eACRC,EAAcC,mBACdC,GACEC,EAAAC,KAEEC,EAAaC,SAASC,cAAc,sBACpCC,EAAWF,SAASC,cAAc,sBAElB,MACpB,IAAIE,EACFC,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,yBAA2B,GAC7DvB,EAAQwB,WAAY,EAAA1B,EAAA2B,SAASR,EAAa,EAE5CS,GAkEA,SAASC,EAAWC,IAEhBA,EAAMC,OAAOC,UAAUC,SAAS,aAChCH,EAAMC,OAAOC,UAAUC,SAAS,sBAEhCC,G,CAGJ,SAASA,IACP9B,EAAU4B,UAAUG,IAAI,mBACxB3B,EAAS4B,oBAAoB,QAASP,GACtCQ,OAAOD,oBAAoB,UAAWE,E,CAExC,SAASA,EAAgBR,GACJ,WAAfA,EAAMS,MACRL,G,CA/EgB,MAClB,IAAIf,EACFC,KAAKC,MAAMC,aAAaC,QAAQC,EAAAgB,uBAAyB,GAC3DtC,EAAQuC,mBAAmB,aAAa,EAAAzC,EAAA2B,SAASR,GAAc,EAEjEuB,GAEA3B,EAAW4B,iBAAiB,SAC5B,WACE,IAAIxB,EAAeC,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,wBACnDvB,EAAQwB,WAAY,EAAA1B,EAAA2B,SAASR,GAC7ByB,QAAQC,IAAI1B,E,IAGdD,EAASyB,iBAAiB,SAC1B,WACE,IAAIxB,EAAeC,KAAKC,MAAMC,aAAaC,QAAQC,EAAAgB,sBACnDtC,EAAQwB,WAAY,EAAA1B,EAAA2B,SAASR,E,IAG/BjB,EAAQyC,iBAAiB,SAEzB,SAAwBb,GACtB,IAAKA,EAAMC,OAAOe,QAAQ,kBACxB,QAkBJ,SAAmBC,GACjB3C,EAAU4B,UAAUgB,OAAO,mBAC3BxC,EAASmC,iBAAiB,QAASd,GACnCQ,OAAOM,iBAAiB,UAAWL,GAEnC,MAAMW,EAAe7B,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,wBAC/CyB,EAAa9B,KAAKC,MAAMC,aAAaC,QAAQC,EAAAgB,sBACnDS,EAAaE,MAAKC,IACZA,EAAGL,KAAOM,OAAON,KACnBrC,EAAegB,WAAY,EAAA4B,EAAA3B,SAAeyB,GAC1CH,EAAa9C,UAAYiD,E,IAI7BF,EAAWC,MAAKC,IACVA,EAAGL,KAAOM,OAAON,KACnBrC,EAAegB,WAAY,EAAA4B,EAAA3B,SAAeyB,GAC1CF,EAAW/C,UAAYiD,E,IAjC3BG,CAAUzB,EAAMC,OAAOe,QAAQ,kBAAkBC,IAEjD,MAAMS,EAASxC,SAASC,cAAc,cACtCuC,EAAOC,YAAcJ,OAAOK,WAAWF,EAAOC,aAAaE,QAAQ,GAEnE,MAAMC,EAAe5C,SAASC,cAAc,oBAC5C2C,EAAaH,YAAcJ,OAAOK,WAChCE,EAAaH,aACbE,QAAQ,GAEV,MAAME,EAAa7C,SAASC,cAAc,eACpC6C,EAAe9C,SAASC,cAAc,+BAE5C4C,EAAWJ,YAAcK,EAAaL,YAAYM,MAAM,IAAK,E","sources":["src/library.js","src/js/components/localStorage-library.js"],"sourcesContent":["import './js/refs/refs';\nimport './js/components/modal/modal';\nimport './js/components/students-modal';\nimport './js/components/localStorage-library';\nimport './js/components/go-to-top';\n","import template from '../../templates/cards.hbs';\nimport modalTemplates from '../../templates/modalFilm.hbs';\nimport { FILMOTEKA_KEY_WATCHED } from './modal/modal';\nimport { FILMOTEKA_KEY_QUEUE } from './modal/modal';\n\nimport { refs } from '../refs/refs';\nimport { logger } from 'handlebars';\n\nconst {\n  cardsEl,\n  modalFilm,\n  closeModalBtn,\n  backdrop,\n  modalContainer,\n  modalFilmContainer,\n} = refs;\n\nconst watchedBtn = document.querySelector('.header__watch-btn');\nconst queueBtn = document.querySelector('.header__queue-btn');\n\nconst renderWatched = () => {\n  let dataToRender =\n    JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED)) ?? {};\n  cardsEl.innerHTML = template(dataToRender);\n};\nrenderWatched();\n\nconst renderQueue = () => {\n  let dataToRender =\n    JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE)) ?? {};\n  cardsEl.insertAdjacentHTML('beforeend', template(dataToRender));\n};\nrenderQueue();\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nfunction onWatchedBtnClick() {\n  let dataToRender = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED));\n  cardsEl.innerHTML = template(dataToRender);\n  console.log(dataToRender);\n}\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\nfunction onQueueBtnClick() {\n  let dataToRender = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE));\n  cardsEl.innerHTML = template(dataToRender);\n}\n\ncardsEl.addEventListener('click', onGalleryClick);\n\nfunction onGalleryClick(event) {\n  if (!event.target.closest('.gallery__item')) {\n    return;\n  }\n  openModal(event.target.closest('.gallery__item').id);\n\n  const voteEl = document.querySelector('.film-vote');\n  voteEl.textContent = Number.parseFloat(voteEl.textContent).toFixed(1);\n\n  const popularityEl = document.querySelector('.film-popularity');\n  popularityEl.textContent = Number.parseFloat(\n    popularityEl.textContent\n  ).toFixed(1);\n\n  const filmGenres = document.querySelector('.film-genre');\n  const filmGenresEl = document.querySelector('.gallery__film-subscription');\n\n  filmGenres.textContent = filmGenresEl.textContent.split(' ', 2);\n}\n\nfunction openModal(id) {\n  modalFilm.classList.remove('visually-hidden');\n  backdrop.addEventListener('click', closeModal);\n  window.addEventListener('keydown', onEscapeKeyDown);\n\n  const watchedFilms = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED));\n  const queueFilms = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE));\n  watchedFilms.some(el => {\n    if (el.id === Number(id)) {\n      modalContainer.innerHTML = modalTemplates(el);\n      watchedFilms.modalFilm = el;\n    }\n  });\n\n  queueFilms.some(el => {\n    if (el.id === Number(id)) {\n      modalContainer.innerHTML = modalTemplates(el);\n      queueFilms.modalFilm = el;\n    }\n  });\n}\n\nfunction closeModal(event) {\n  if (\n    event.target.classList.contains('backdrop') ||\n    event.target.classList.contains('modal__close-btn')\n  ) {\n    hideModal();\n  }\n}\nfunction hideModal() {\n  modalFilm.classList.add('visually-hidden');\n  backdrop.removeEventListener('click', closeModal);\n  window.removeEventListener('keydown', onEscapeKeyDown);\n}\nfunction onEscapeKeyDown(event) {\n  if (event.code === 'Escape') {\n    hideModal();\n  }\n}\n"],"names":["parcelRequire","$5cQgp","cardsEl","$57a3fdb3556fdeca$var$cardsEl","modalFilm","$57a3fdb3556fdeca$var$modalFilm","closeModalBtn","$57a3fdb3556fdeca$var$closeModalBtn","backdrop","$57a3fdb3556fdeca$var$backdrop","modalContainer","$57a3fdb3556fdeca$var$modalContainer","modalFilmContainer","$57a3fdb3556fdeca$var$modalFilmContainer","$cqmI4","refs","$57a3fdb3556fdeca$var$watchedBtn","document","querySelector","$57a3fdb3556fdeca$var$queueBtn","dataToRender","JSON","parse","localStorage","getItem","$108Sg","FILMOTEKA_KEY_WATCHED","innerHTML","default","$57a3fdb3556fdeca$var$renderWatched","$57a3fdb3556fdeca$var$closeModal","event","target","classList","contains","$57a3fdb3556fdeca$var$hideModal","add","removeEventListener","window","$57a3fdb3556fdeca$var$onEscapeKeyDown","code","FILMOTEKA_KEY_QUEUE","insertAdjacentHTML","$57a3fdb3556fdeca$var$renderQueue","addEventListener","console","log","closest","id","remove","watchedFilms","queueFilms","some","el","Number","$l75Ri","$57a3fdb3556fdeca$var$openModal","voteEl","textContent","parseFloat","toFixed","popularityEl","filmGenres","filmGenresEl","split"],"version":3,"file":"library.35684804.js.map"}