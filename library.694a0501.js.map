{"mappings":"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","sources":["src/library.js","src/templates/cards-library.hbs","src/js/components/localStorage-library.js"],"sourcesContent":["import './js/refs/refs';\nimport './js/components/modal/modal';\nimport './js/components/students-modal';\nimport './js/components/localStorage-library';\nimport './js/components/go-to-top';\nimport './js/components/theme';\n\n","{{#each this}}\n<li class=\"gallery__item\" id=\"{{id}}\">\n    <div class=\"gallery__film-image\">\n        <img src=\"https://image.tmdb.org/t/p/w500{{poster_path}}\" loading=\"lazy\" alt=\"{{title}}\"  class=\"gallery_image\" />\n    </div>\n    <div class=\"gallery__film-info\">\n        <p class=\"gallery__film-name\">{{title}}</p>\n        <p class=\"gallery__film-subscription\">{{genre_ids}} | {{release_date}}\n        <span class=\"gallery_film-vote\">{{vote_average}}</span></p>\n    </div>\n    </div>\n</li>\n{{/each}}","import template from '../../templates/cards-library.hbs';\nimport modalTemplates from '../../templates/modalFilm.hbs';\nimport { FILMOTEKA_KEY_WATCHED } from './modal/modal';\nimport { FILMOTEKA_KEY_QUEUE } from './modal/modal';\n\nimport { refs } from '../refs/refs';\nimport { logger } from 'handlebars';\n\nconst {\n  cardsEl,\n  modalFilm,\n  closeModalBtn,\n  backdrop,\n  modalContainer,\n  modalFilmContainer,\n} = refs;\n\nconst watchedBtn = document.querySelector('.header__watch-btn');\nconst queueBtn = document.querySelector('.header__queue-btn');\n\nconst renderWatched = () => {\n  let dataToRender =\n    JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED)) ?? {};\n  cardsEl.innerHTML = template(dataToRender);\n  watchedBtn.classList.add('btn-active');\n};\nrenderWatched();\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nfunction onWatchedBtnClick() {\n  let dataToRender = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED));\n  cardsEl.innerHTML = template(dataToRender);\n  watchedBtn.classList.add('btn-active');\n  queueBtn.classList.remove('btn-active');\n}\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\nfunction onQueueBtnClick() {\n  let dataToRender = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE));\n  cardsEl.innerHTML = template(dataToRender);\n  watchedBtn.classList.remove('btn-active');\n  queueBtn.classList.add('btn-active');\n}\n\ncardsEl.addEventListener('click', onGalleryClick);\n\nfunction onGalleryClick(event) {\n  if (!event.target.closest('.gallery__item')) {\n    return;\n  }\n  openModal(event.target.closest('.gallery__item').id);\n\n  const voteEl = document.querySelector('.film-vote');\n  voteEl.textContent = Number.parseFloat(voteEl.textContent).toFixed(1);\n\n  const popularityEl = document.querySelector('.film-popularity');\n  popularityEl.textContent = Number.parseFloat(\n    popularityEl.textContent\n  ).toFixed(1);\n\n  const filmGenres = document.querySelector('.film-genre');\n  const filmGenresEl = document.querySelector('.gallery__film-subscription');\n\n  filmGenres.textContent = filmGenresEl.textContent.split(' ', 2);\n}\n\nfunction openModal(id) {\n  modalFilm.classList.remove('visually-hidden');\n  backdrop.addEventListener('click', closeModal);\n  window.addEventListener('keydown', onEscapeKeyDown);\n\n  const watchedFilms = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED));\n  const queueFilms = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE));\n  watchedFilms.some(el => {\n    if (el.id === Number(id)) {\n      modalContainer.innerHTML = modalTemplates(el);\n      watchedFilms.modalFilm = el;\n    }\n  });\n\n  queueFilms.some(el => {\n    if (el.id === Number(id)) {\n      modalContainer.innerHTML = modalTemplates(el);\n      queueFilms.modalFilm = el;\n    }\n  });\n}\n\nfunction closeModal(event) {\n  if (\n    event.target.classList.contains('backdrop') ||\n    event.target.classList.contains('modal__close-btn')\n  ) {\n    hideModal();\n  }\n}\nfunction hideModal() {\n  modalFilm.classList.add('visually-hidden');\n  backdrop.removeEventListener('click', closeModal);\n  window.removeEventListener('keydown', onEscapeKeyDown);\n}\nfunction onEscapeKeyDown(event) {\n  if (event.code === 'Escape') {\n    hideModal();\n  }\n}\n"],"names":["parcelRequire","$6581b314652b8511$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","noop","useData","cardsEl","$90ae56fe15eb4d5f$var$cardsEl","modalFilm","$90ae56fe15eb4d5f$var$modalFilm","closeModalBtn","$90ae56fe15eb4d5f$var$closeModalBtn","backdrop","$90ae56fe15eb4d5f$var$backdrop","modalContainer","$90ae56fe15eb4d5f$var$modalContainer","modalFilmContainer","$90ae56fe15eb4d5f$var$modalFilmContainer","$3ILHO","refs","$90ae56fe15eb4d5f$var$watchedBtn","document","querySelector","$90ae56fe15eb4d5f$var$queueBtn","$90ae56fe15eb4d5f$var$closeModal","event","target","classList","contains","$90ae56fe15eb4d5f$var$hideModal","add","removeEventListener","window","$90ae56fe15eb4d5f$var$onEscapeKeyDown","code","dataToRender","JSON","parse","localStorage","getItem","$bbmaV","FILMOTEKA_KEY_WATCHED","innerHTML","$90ae56fe15eb4d5f$var$renderWatched","addEventListener","remove","FILMOTEKA_KEY_QUEUE","closest","id","watchedFilms","queueFilms","some","el","Number","$70Nf4","default","$90ae56fe15eb4d5f$var$openModal","voteEl","textContent","parseFloat","toFixed","popularityEl","filmGenres","filmGenresEl","split"],"version":3,"file":"library.694a0501.js.map"}