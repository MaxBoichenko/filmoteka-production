{"mappings":"gfAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,gFAUA,MAAME,QACJC,EAAOC,UACPC,EAASC,cACTC,EAAaC,SACbC,EAAQC,eACRC,EAAcC,mBACdC,GACEC,EAAAC,KAEEC,EAAaC,SAASC,cAAc,sBACpCC,EAAWF,SAASC,cAAc,sBAExCE,OAAOC,iBAAiB,QAKxBC,eAA0BC,GACxB,UACQC,EAAAC,cAAcC,a,CACpB,MAAOC,GACPC,QAAQC,IAAIF,E,CAEdX,EAAWc,UAAUC,IAAI,cAEzB,IAAIC,EACFC,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,yBAA2B,GAEzDC,EAAYN,KAAKC,MAAMC,aAAaC,QAAQC,EAAAG,uBAAyB,GAIzE,GAFAhB,EAAAC,cAAcgB,MAAQT,EAAmBU,OAAOH,GAE5CP,EAAmBW,OAAQ,CAC7B,MAAMC,EAASpB,EAAAC,cAAcoB,kBAAkBb,GAE/C,YADA7B,EAAQ2C,WAAY,EAAA7C,EAAA8C,SAASH,G,CAG/BzC,EAAQ2C,UACN,0I,IAxBJ9B,EAAWK,iBAAiB,SA2BrB,WACL,IAAI2B,EACFf,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,yBAA2B,GAK7D,GAHAtB,EAAWc,UAAUC,IAAI,cACzBZ,EAASW,UAAUmB,OAAO,eAErBD,EAAoBL,OAGvB,YAFAxC,EAAQ2C,UACN,4IAGJ,IAAII,EAAgB1B,EAAAC,cAAcoB,kBAAkBG,GACpD7C,EAAQ2C,WAAY,EAAA7C,EAAA8C,SAASG,E,IAvC/B/B,EAASE,iBAAiB,SA0CnB,WACL,IAAI8B,EACFlB,KAAKC,MAAMC,aAAaC,QAAQC,EAAAG,uBAAyB,GAK3D,GAHAxB,EAAWc,UAAUmB,OAAO,cAC5B9B,EAASW,UAAUC,IAAI,eAElBoB,EAAkBR,OAGrB,YAFAxC,EAAQ2C,UACN,qIAIJ,MAAMM,EAAc5B,EAAAC,cAAcoB,kBAAkBM,GACpDhD,EAAQ2C,WAAY,EAAA7C,EAAA8C,SAASK,E","sources":["src/library.js","src/js/components/localStorage-library.js"],"sourcesContent":["import './js/refs/refs';\n// import './js/components/modal/modal';\nimport './js/components/students-modal';\nimport './js/components/localStorage-library';\nimport './js/components/go-to-top';\nimport './js/components/theme';\n","import template from '../../templates/cards-library.hbs';\nimport modalTemplates from '../../templates/modalFilm.hbs';\nimport { FILMOTEKA_KEY_WATCHED } from './modal/modal';\nimport { FILMOTEKA_KEY_QUEUE } from './modal/modal';\n\nimport { movieDatabase } from '../API/fetchService';\n\nimport { refs } from '../refs/refs';\nimport { logger } from 'handlebars';\n\nconst {\n  cardsEl,\n  modalFilm,\n  closeModalBtn,\n  backdrop,\n  modalContainer,\n  modalFilmContainer,\n} = refs;\n\nconst watchedBtn = document.querySelector('.header__watch-btn');\nconst queueBtn = document.querySelector('.header__queue-btn');\n\nwindow.addEventListener('load', onLoadPage);\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nqueueBtn.addEventListener('click', onQueueBtnClick);\n\nasync function onLoadPage(event) {\n  try {\n    await movieDatabase.fetchGenres();\n  } catch (error) {\n    console.log(error);\n  }\n  watchedBtn.classList.add('btn-active');\n\n  let dataToRenderOnLoad =\n    JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED)) ?? [];\n\n  let dataQueue = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE)) ?? [];\n\n  movieDatabase.films = dataToRenderOnLoad.concat(dataQueue);\n\n  if (dataToRenderOnLoad.length) {\n    const markup = movieDatabase.createCardsMarkup(dataToRenderOnLoad);\n    cardsEl.innerHTML = template(markup);\n    return;\n  }\n  cardsEl.innerHTML =\n    '<h1 class=\"title-queue\">Your watched list is empty</h1><img src=\"https://image.tmdb.org/t/p/w500/wjYOUKIIOEklJJ4xbbQVRN6PRly.jpg\"></img>';\n}\n\nexport function onWatchedBtnClick() {\n  let dataToRenderWatched =\n    JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED)) ?? [];\n\n  watchedBtn.classList.add('btn-active');\n  queueBtn.classList.remove('btn-active');\n\n  if (!dataToRenderWatched.length) {\n    cardsEl.innerHTML =\n      '<h1 class=\"title-queue\">Your watched list is empty</h1><img src=\"https://image.tmdb.org/t/p/w500/wjYOUKIIOEklJJ4xbbQVRN6PRly.jpg\"></img>';\n    return;\n  }\n  let markupWatched = movieDatabase.createCardsMarkup(dataToRenderWatched);\n  cardsEl.innerHTML = template(markupWatched);\n}\n\nexport function onQueueBtnClick() {\n  let dataToRenderQueue =\n    JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE)) ?? [];\n\n  watchedBtn.classList.remove('btn-active');\n  queueBtn.classList.add('btn-active');\n\n  if (!dataToRenderQueue.length) {\n    cardsEl.innerHTML =\n      '<h1 class=\"title-queue\">Your queue is empty</h1><img src=\"https://image.tmdb.org/t/p/w500/wjYOUKIIOEklJJ4xbbQVRN6PRly.jpg\"></img>';\n    return;\n  }\n\n  const markupQueue = movieDatabase.createCardsMarkup(dataToRenderQueue);\n  cardsEl.innerHTML = template(markupQueue);\n}\n"],"names":["parcelRequire","$k9NAr","cardsEl","$57a3fdb3556fdeca$var$cardsEl","modalFilm","$57a3fdb3556fdeca$var$modalFilm","closeModalBtn","$57a3fdb3556fdeca$var$closeModalBtn","backdrop","$57a3fdb3556fdeca$var$backdrop","modalContainer","$57a3fdb3556fdeca$var$modalContainer","modalFilmContainer","$57a3fdb3556fdeca$var$modalFilmContainer","$cqmI4","refs","$57a3fdb3556fdeca$var$watchedBtn","document","querySelector","$57a3fdb3556fdeca$var$queueBtn","window","addEventListener","async","event","$2DTBe","movieDatabase","fetchGenres","error","console","log","classList","add","dataToRenderOnLoad","JSON","parse","localStorage","getItem","$108Sg","FILMOTEKA_KEY_WATCHED","dataQueue","FILMOTEKA_KEY_QUEUE","films","concat","length","markup","createCardsMarkup","innerHTML","default","dataToRenderWatched","remove","markupWatched","dataToRenderQueue","markupQueue"],"version":3,"file":"library.e13c0d8f.js.map"}