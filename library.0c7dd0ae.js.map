{"mappings":"gfAAAA,EAAA,S,sBCAA,IAAAC,EAAAD,EAAA,S,iEAQA,MAAME,QACJC,EAAOC,UACPC,EAASC,cACTC,EAAaC,SACbC,EAAQC,eACRC,EAAcC,mBACdC,GACEC,EAAAC,KAEEC,EAAaC,SAASC,cAAc,sBACpCC,EAAWF,SAASC,cAAc,sBAuExC,SAASE,EAAWC,IAEhBA,EAAMC,OAAOC,UAAUC,SAAS,aAChCH,EAAMC,OAAOC,UAAUC,SAAS,sBAEhCC,G,CAGJ,SAASA,IACPpB,EAAUkB,UAAUG,IAAI,mBACxBjB,EAASkB,oBAAoB,QAASP,GACtCQ,OAAOD,oBAAoB,UAAWE,E,CAExC,SAASA,EAAgBR,GACJ,WAAfA,EAAMS,MACRL,G,CApFkB,MACpB,IAAIM,EACFC,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,yBAA2B,GAC7DlC,EAAQmC,WAAY,EAAArC,EAAAsC,SAASR,GAC7Bf,EAAWO,UAAUG,IAAI,aAAa,EAExCc,GAEAxB,EAAWyB,iBAAiB,SAC5B,WACE,IAAIV,EAAeC,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,wBACnDlC,EAAQmC,WAAY,EAAArC,EAAAsC,SAASR,GAC7BW,QAAQC,IAAIZ,GACZf,EAAWO,UAAUG,IAAI,cACzBP,EAASI,UAAUqB,OAAO,a,IAG5BzB,EAASsB,iBAAiB,SAC1B,WACE,IAAIV,EAAeC,KAAKC,MAAMC,aAAaC,QAAQC,EAAAS,sBACnD1C,EAAQmC,WAAY,EAAArC,EAAAsC,SAASR,GAC7Bf,EAAWO,UAAUqB,OAAO,cAC5BzB,EAASI,UAAUG,IAAI,a,IAGzBvB,EAAQsC,iBAAiB,SAEzB,SAAwBpB,GACtB,IAAKA,EAAMC,OAAOwB,QAAQ,kBACxB,QAkBJ,SAAmBC,GACjB1C,EAAUkB,UAAUqB,OAAO,mBAC3BnC,EAASgC,iBAAiB,QAASrB,GACnCQ,OAAOa,iBAAiB,UAAWZ,GAEnC,MAAMmB,EAAehB,KAAKC,MAAMC,aAAaC,QAAQC,EAAAC,wBAC/CY,EAAajB,KAAKC,MAAMC,aAAaC,QAAQC,EAAAS,sBACnDG,EAAaE,MAAKC,IACZA,EAAGJ,KAAOK,OAAOL,KACnBpC,EAAe2B,WAAY,EAAAe,EAAAd,SAAeY,GAC1CH,EAAa5C,UAAY+C,E,IAI7BF,EAAWC,MAAKC,IACVA,EAAGJ,KAAOK,OAAOL,KACnBpC,EAAe2B,WAAY,EAAAe,EAAAd,SAAeY,GAC1CF,EAAW7C,UAAY+C,E,IAjC3BG,CAAUjC,EAAMC,OAAOwB,QAAQ,kBAAkBC,IAEjD,MAAMQ,EAAStC,SAASC,cAAc,cACtCqC,EAAOC,YAAcJ,OAAOK,WAAWF,EAAOC,aAAaE,QAAQ,GAEnE,MAAMC,EAAe1C,SAASC,cAAc,oBAC5CyC,EAAaH,YAAcJ,OAAOK,WAChCE,EAAaH,aACbE,QAAQ,GAEV,MAAME,EAAa3C,SAASC,cAAc,eACpC2C,EAAe5C,SAASC,cAAc,+BAE5C0C,EAAWJ,YAAcK,EAAaL,YAAYM,MAAM,IAAK,E","sources":["src/library.js","src/js/components/localStorage-library.js"],"sourcesContent":["import './js/refs/refs';\nimport './js/components/modal/modal';\nimport './js/components/students-modal';\nimport './js/components/localStorage-library';\nimport './js/components/go-to-top';\n","import template from '../../templates/cards.hbs';\nimport modalTemplates from '../../templates/modalFilm.hbs';\nimport { FILMOTEKA_KEY_WATCHED } from './modal/modal';\nimport { FILMOTEKA_KEY_QUEUE } from './modal/modal';\n\nimport { refs } from '../refs/refs';\nimport { logger } from 'handlebars';\n\nconst {\n  cardsEl,\n  modalFilm,\n  closeModalBtn,\n  backdrop,\n  modalContainer,\n  modalFilmContainer,\n} = refs;\n\nconst watchedBtn = document.querySelector('.header__watch-btn');\nconst queueBtn = document.querySelector('.header__queue-btn');\n\nconst renderWatched = () => {\n  let dataToRender =\n    JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED)) ?? {};\n  cardsEl.innerHTML = template(dataToRender);\n  watchedBtn.classList.add('btn-active');\n};\nrenderWatched();\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nfunction onWatchedBtnClick() {\n  let dataToRender = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED));\n  cardsEl.innerHTML = template(dataToRender);\n  console.log(dataToRender);\n  watchedBtn.classList.add('btn-active');\n  queueBtn.classList.remove('btn-active');\n}\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\nfunction onQueueBtnClick() {\n  let dataToRender = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE));\n  cardsEl.innerHTML = template(dataToRender);\n  watchedBtn.classList.remove('btn-active');\n  queueBtn.classList.add('btn-active');\n}\n\ncardsEl.addEventListener('click', onGalleryClick);\n\nfunction onGalleryClick(event) {\n  if (!event.target.closest('.gallery__item')) {\n    return;\n  }\n  openModal(event.target.closest('.gallery__item').id);\n\n  const voteEl = document.querySelector('.film-vote');\n  voteEl.textContent = Number.parseFloat(voteEl.textContent).toFixed(1);\n\n  const popularityEl = document.querySelector('.film-popularity');\n  popularityEl.textContent = Number.parseFloat(\n    popularityEl.textContent\n  ).toFixed(1);\n\n  const filmGenres = document.querySelector('.film-genre');\n  const filmGenresEl = document.querySelector('.gallery__film-subscription');\n\n  filmGenres.textContent = filmGenresEl.textContent.split(' ', 2);\n}\n\nfunction openModal(id) {\n  modalFilm.classList.remove('visually-hidden');\n  backdrop.addEventListener('click', closeModal);\n  window.addEventListener('keydown', onEscapeKeyDown);\n\n  const watchedFilms = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED));\n  const queueFilms = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE));\n  watchedFilms.some(el => {\n    if (el.id === Number(id)) {\n      modalContainer.innerHTML = modalTemplates(el);\n      watchedFilms.modalFilm = el;\n    }\n  });\n\n  queueFilms.some(el => {\n    if (el.id === Number(id)) {\n      modalContainer.innerHTML = modalTemplates(el);\n      queueFilms.modalFilm = el;\n    }\n  });\n}\n\nfunction closeModal(event) {\n  if (\n    event.target.classList.contains('backdrop') ||\n    event.target.classList.contains('modal__close-btn')\n  ) {\n    hideModal();\n  }\n}\nfunction hideModal() {\n  modalFilm.classList.add('visually-hidden');\n  backdrop.removeEventListener('click', closeModal);\n  window.removeEventListener('keydown', onEscapeKeyDown);\n}\nfunction onEscapeKeyDown(event) {\n  if (event.code === 'Escape') {\n    hideModal();\n  }\n}\n"],"names":["parcelRequire","$5cQgp","cardsEl","$57a3fdb3556fdeca$var$cardsEl","modalFilm","$57a3fdb3556fdeca$var$modalFilm","closeModalBtn","$57a3fdb3556fdeca$var$closeModalBtn","backdrop","$57a3fdb3556fdeca$var$backdrop","modalContainer","$57a3fdb3556fdeca$var$modalContainer","modalFilmContainer","$57a3fdb3556fdeca$var$modalFilmContainer","$cqmI4","refs","$57a3fdb3556fdeca$var$watchedBtn","document","querySelector","$57a3fdb3556fdeca$var$queueBtn","$57a3fdb3556fdeca$var$closeModal","event","target","classList","contains","$57a3fdb3556fdeca$var$hideModal","add","removeEventListener","window","$57a3fdb3556fdeca$var$onEscapeKeyDown","code","dataToRender","JSON","parse","localStorage","getItem","$108Sg","FILMOTEKA_KEY_WATCHED","innerHTML","default","$57a3fdb3556fdeca$var$renderWatched","addEventListener","console","log","remove","FILMOTEKA_KEY_QUEUE","closest","id","watchedFilms","queueFilms","some","el","Number","$l75Ri","$57a3fdb3556fdeca$var$openModal","voteEl","textContent","parseFloat","toFixed","popularityEl","filmGenres","filmGenresEl","split"],"version":3,"file":"library.0c7dd0ae.js.map"}