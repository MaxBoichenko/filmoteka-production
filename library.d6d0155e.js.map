{"mappings":"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","sources":["src/library.js","src/templates/cards-library.hbs","src/js/components/localStorage-library.js"],"sourcesContent":["import './js/refs/refs';\nimport './js/components/modal/modal';\nimport './js/components/students-modal';\nimport './js/components/localStorage-library';\nimport './js/components/go-to-top';\nimport './js/components/theme';\n\n","{{#each this}}\n<li class=\"gallery__item gallery__item-library\" id=\"{{id}}\">\n    <div class=\"gallery__film-image\">\n        <img src=\"https://image.tmdb.org/t/p/w500{{poster_path}}\" loading=\"lazy\" alt=\"{{title}}\"  class=\"gallery_image\" />\n    </div>\n    <div class=\"gallery__film-info\">\n        <p class=\"gallery__film-name\">{{title}}</p>\n        <p class=\"gallery__film-subscription\">{{genre_ids}} | {{release_date}}\n        <span class=\"gallery_film-vote\">{{vote_average}}</span></p>\n    </div>\n    </div>\n</li>\n{{/each}}","import template from '../../templates/cards-library.hbs';\nimport modalTemplates from '../../templates/modalFilm.hbs';\nimport { FILMOTEKA_KEY_WATCHED } from './modal/modal';\nimport { FILMOTEKA_KEY_QUEUE } from './modal/modal';\n\nimport { movieDatabase } from '../API/fetchService';\n\nimport { refs } from '../refs/refs';\nimport { logger } from 'handlebars';\n\nconst {\n  cardsEl,\n  modalFilm,\n  closeModalBtn,\n  backdrop,\n  modalContainer,\n  modalFilmContainer,\n} = refs;\n\nconst watchedBtn = document.querySelector('.header__watch-btn');\nconst queueBtn = document.querySelector('.header__queue-btn');\n\nconst renderWatched = () => {\n  let dataToRender =\n    JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED)) ?? {};\n\n  cardsEl.innerHTML = template(dataToRender);\n  watchedBtn.classList.add('btn-active');\n  movieDatabase.films = dataToRender;\n  onLoadPage();\n};\nrenderWatched();\n\nasync function onLoadPage(event) {\n  try {\n    await movieDatabase.fetchGenres();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nwatchedBtn.addEventListener('click', onWatchedBtnClick);\nfunction onWatchedBtnClick() {\n  let dataToRender = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED));\n  const markup = movieDatabase.createCardsMarkup(dataToRender);\n  cardsEl.innerHTML = template(markup);\n  watchedBtn.classList.add('btn-active');\n  queueBtn.classList.remove('btn-active');\n}\n\nqueueBtn.addEventListener('click', onQueueBtnClick);\nfunction onQueueBtnClick() {\n  let dataToRender = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE));\n\n  const markup = movieDatabase.createCardsMarkup(dataToRender);\n  cardsEl.innerHTML = template(markup);\n  watchedBtn.classList.remove('btn-active');\n  queueBtn.classList.add('btn-active');\n}\n\ncardsEl.addEventListener('click', onGalleryClick);\n\nfunction onGalleryClick(event) {\n  if (!event.target.closest('.gallery__item-library')) {\n    return;\n  }\n  openModalLib(event.target.closest('.gallery__item-library').id);\n\n  const btnQueueLib = document.querySelector('.js-queue');\n  const btnWatchedLib = document.querySelector('.js-watched');\n  btnQueueLib.classList.add('visually-hidden');\n  btnWatchedLib.classList.add('visually-hidden');\n\n  const voteEl = document.querySelector('.film-vote');\n  voteEl.textContent = Number.parseFloat(voteEl.textContent).toFixed(1);\n\n  const popularityEl = document.querySelector('.film-popularity');\n  popularityEl.textContent = Number.parseFloat(\n    popularityEl.textContent\n  ).toFixed(1);\n\n  const filmGenres = document.querySelector('.film-genre');\n\n  if (!movieDatabase.modalFilm.genre_ids.length) {\n    filmGenres.textContent = '----';\n  } else {\n    const genres = movieDatabase.modalFilm.genre_ids.map(\n      genreId =>\n        movieDatabase.allGenres.find(genre => genre.id === genreId).name\n    );\n\n    filmGenres.textContent = genres.join(', ');\n  }\n}\n\nfunction openModalLib(id) {\n  modalFilm.classList.remove('visually-hidden');\n  backdrop.addEventListener('click', closeModal);\n  window.addEventListener('keydown', onEscapeKeyDown);\n\n  const watchedFilms = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_WATCHED));\n  const queueFilms = JSON.parse(localStorage.getItem(FILMOTEKA_KEY_QUEUE));\n  watchedFilms.some(el => {\n    if (el.id === Number(id)) {\n      modalContainer.innerHTML = modalTemplates(el);\n      watchedFilms.modalFilm = el;\n    }\n  });\n\n  queueFilms.some(el => {\n    if (el.id === Number(id)) {\n      modalContainer.innerHTML = modalTemplates(el);\n      queueFilms.modalFilm = el;\n    }\n  });\n}\n\nfunction closeModal(event) {\n  if (\n    event.target.classList.contains('backdrop') ||\n    event.target.classList.contains('modal__close-btn')\n  ) {\n    hideModal();\n  }\n}\nfunction hideModal() {\n  modalFilm.classList.add('visually-hidden');\n  backdrop.removeEventListener('click', closeModal);\n  window.removeEventListener('keydown', onEscapeKeyDown);\n}\nfunction onEscapeKeyDown(event) {\n  if (event.code === 'Escape') {\n    hideModal();\n  }\n}\n"],"names":["parcelRequire","$6581b314652b8511$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","noop","useData","cardsEl","$90ae56fe15eb4d5f$var$cardsEl","modalFilm","$90ae56fe15eb4d5f$var$modalFilm","closeModalBtn","$90ae56fe15eb4d5f$var$closeModalBtn","backdrop","$90ae56fe15eb4d5f$var$backdrop","modalContainer","$90ae56fe15eb4d5f$var$modalContainer","modalFilmContainer","$90ae56fe15eb4d5f$var$modalFilmContainer","$3ILHO","refs","$90ae56fe15eb4d5f$var$watchedBtn","document","querySelector","$90ae56fe15eb4d5f$var$queueBtn","$90ae56fe15eb4d5f$var$closeModal","event","target","classList","contains","$90ae56fe15eb4d5f$var$hideModal","add","removeEventListener","window","$90ae56fe15eb4d5f$var$onEscapeKeyDown","code","dataToRender","JSON","parse","localStorage","getItem","$bbmaV","FILMOTEKA_KEY_WATCHED","innerHTML","$gMdK3","movieDatabase","films","async","fetchGenres","error","console","log","$90ae56fe15eb4d5f$var$onLoadPage","$90ae56fe15eb4d5f$var$renderWatched","addEventListener","markup","createCardsMarkup","remove","FILMOTEKA_KEY_QUEUE","closest","id","watchedFilms","queueFilms","some","el","Number","$70Nf4","default","$90ae56fe15eb4d5f$var$openModalLib","btnQueueLib","btnWatchedLib","voteEl","textContent","parseFloat","toFixed","popularityEl","filmGenres","genre_ids","length","genres","map","genreId","allGenres","find","genre","join"],"version":3,"file":"library.d6d0155e.js.map"}